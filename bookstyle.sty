% !TEX root = main.tex
% --------------------------------------------------------------
% Book Style
% --------------------------------------------------------------

% % space between line as percentage
% \linespread{1.15}
% % space between paragraphs.
% % \setlength{\parskip}{4pt}
% % paragraph indent
% \setlength{\parindent}{0pt}
% % discourage breaking of footnote text accorss multiple pages.
% \interfootnotelinepenalty=1000
% % to take care of nonbreakingspace issue in EU1 format of the .bbl
% \DeclareTextCommandDefault{\nobreakspace}{\leavevmode\nobreak\ }


% REQUIRED PACKAGES
%%%%%%%%%%%%%%%%%%%%%
% latexbangla with all features
\RequirePackage[banglamainfont=Kalpurush,
                banglattfont=Kalpurush,
               ]{latexbangla}
%activate polyglossia
\setdefaultlanguage[numerals=Bengali,
changecounternumbering=true]{bengali}
%number all levels
\setcounter{secnumdepth}{5}
    \setotherlanguage{english}

\usepackage{fontspec}
\setsansfont{Kalpurush}
\sffamily 

% \inlcudegraphics
\RequirePackage{graphicx}

% % URL font is latex default Latin Modern Teletype. If you don't like that
% % change it to something else.
% \renewcommand\UrlFont{\fontencoding{OT1}\fontfamily{lmtt}\selectfont}

% % autoref name for example env. when you call "In \autoref{blah}",
% % it will output "In udahoron blah"
% \newcommand\exampleautorefname{উদাহরণ}

% % translating autoref name for existing commands.
% \appto{\blockextras@bengali}{%
%   \renewcommand*{\equationautorefname}{সমীকরণ}%
% }
% % \appto{\blockextras@bengali}{%
% %   \renewcommand*{\chapterautorefname}{নিবন্ধ}%
% % }
% \appto{\blockextras@bengali}{%
%   \renewcommand*{\sectionautorefname}{সেকশন}%
% }
% \appto{\blockextras@bengali}{%
%   \renewcommand{\figureautorefname}{চিত্র}%
% }


% title and section formatting
% \RequirePackage{titlesec}

% section sign before section number
% \titleformat{\section}[hang]{\raggedright\Large\bfseries}{{\uccoff\fontfamily{lmr}\selectfont\large§\,\uccon}\thesection}{0.5em}{}
% chapter sign before chapter number
% \titleformat{\chapter}[hang]{\raggedright\Large\bfseries}{{\uccoff\fontfamily{lmr}\selectfont\large§\,\uccon}\thechapter}{0.5em}{}

% % chapter title
% \RequirePackage{xcolor}
% \definecolor{mygray}{RGB}{60,60,60}
% \titleformat{\chapter}[display]
%   {\bfseries\color{mygray}}
%   {\filleft%
%     \begin{tikzpicture}
%     \node[
%       outer sep=0pt,
%       text width=2.4cm,
%       minimum height=2.5cm,
%       fill=mygray,
%       font=\color{white}\fontsize{75}{80}\selectfont,
%       align=center
%       ] (num) {\thechapter};
%     \node[
%       rotate=90,
%       anchor=south,
%       font=\color{black}\Large
%       ] at ([xshift=-5pt]num.west) {\chaptertitlename};
%     \end{tikzpicture}%
%   }
%   {-30pt}
%   {\fontsize{22}{24}\selectfont}
%   % [\titlerule[2.5pt]\vskip3pt\titlerule\vskip4pt]
%   [{\titlerule[2.5pt]\vskip3pt\titlerule\vskip-1em}]



% better double border intersection
% \RequirePackage{hhline}

% enlarged first letter
\RequirePackage{lettrine}
\newcommand{\firstword}[2]{\lettrine[lraise=0.25, nindent=0pt, findent=2pt]{#1}{#2}}

% table of contents formatting
\RequirePackage{tocloft}
\def\cftchapteraftersnum{.}
% \renewcommand\cftchapafterpnum{\vskip-5pt}         % Decreasing the line spacing between the names of chapters

% % footnote in tables appear the end of page
% \RequirePackage{footnote}
% \makesavenoteenv{tabular}

% better float management
\RequirePackage{placeins}
% % multiple columns
% \RequirePackage{multicol}
% % compilation time decreases significantly with this package
% % although it produces a warning
% \RequirePackage{subfig}
% % breakable tables
% \RequirePackage{longtable}


% % for customizable boxes
% \RequirePackage[many]{tcolorbox}


%% The below setup if From My preambles of main.tex file
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{docmute}
\RequirePackage{amsmath, amsfonts, amssymb, amsthm}
%\RequirePackage{physics}
\RequirePackage{graphicx}
\RequirePackage{mathtools}
\RequirePackage{extarrows}
\RequirePackage{enumitem}
\RequirePackage{lipsum}
\RequirePackage{blindtext}
\RequirePackage{mwe}
\setlist[itemize]{label*={\fontfamily{lmr}\selectfont\textbullet}}      % due to the Bangla fonts

\RequirePackage[papersize={5.5in, 8.5in}, margin=0.8in, headheight=14.72pt]{geometry}
\linespread{1.15}

%  % For a bilingual document
% \RequirePackage[banglamainfont=Kalpurush,
%                 banglattfont=Kalpurush,
%                ]{latexbangla}
% %activate polyglossia
% \setdefaultlanguage[numerals=Bengali,
% changecounternumbering=true]{bengali}
% %number all levels
% \setcounter{secnumdepth}{5}
%     \setotherlanguage{english}
%..............
\RequirePackage{csquotes}             % https://tex.stackexchange.com/q/39285/114006
\RequirePackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
}
\urlstyle{same}

% Adding header ann footer on pages
\RequirePackage{fancyhdr}
\fancypagestyle{plain}{
  \fancyhf{}                              % clear all header and footer fields
  \lhead{ \spaceskip=5pt\href{https://github.com/rafisics/ebook-template}{নিবন্ধ সংকলন}}
  % \rhead{\href{https://github.com/rafisics/ebook-template}{মুবতাসিম ফুয়াদ}}
  \cfoot{\thepage}
  \renewcommand{\headrulewidth}{0.5pt}
  \renewcommand{\footrulewidth}{0.5pt}
}

% Adding References
% \RequirePackage[backend=biber, sorting=none, language=english, autolang=other]{biblatex}
% \addbibresource{ref.bib}

% Adding pdf pages
\RequirePackage{pdfpages}

%to allow long align env. to break between pages
\allowdisplaybreaks

% % https://tex.stackexchange.com/a/177179/114006        (need to improve)
% \tolerance=1
% \emergencystretch=\maxdimen
% \hyphenpenalty=10000
% \hbadness=10000

% Path relative to the main .tex file
\graphicspath{ {./img/} }

% Adding footer on title page               https://tex.stackexchange.com/a/199356/114006
\RequirePackage{titling}

%% Chapter title page style
%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Chapter sign before section number
\makeatletter
\renewcommand{\@chapapp}{{\uccoff\fontfamily{lmr}\selectfont\Huge§\,\uccon}}
\makeatother

% Removing the vertical blank space before chapter heading     % https://stackoverflow.com/a/3284059/7673979
\RequirePackage{titlesec}
\titleformat{\chapter}[display]
{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge}

\titlespacing*{\chapter} {0pt}{0pt}{40pt}     % this alters "before" spacing (the second length argument) to 0

% Adding Chapter Authors after chapter title:   https://tex.stackexchange.com/a/156865/114006
\RequirePackage{suffix}

\newcommand\chapterauthor[1]{\authortoc{#1}\printchapterauthor{#1}}
\WithSuffix\newcommand\chapterauthor*[1]{\printchapterauthor{#1}}

\makeatletter
\newcommand{\printchapterauthor}[1]{%
  {\parindent0pt\vspace*{-25pt}%
  \linespread{1.1}\Large\scshape#1%
  \par\nobreak\vspace*{35pt}}
  \@afterheading%
}
\newcommand{\authortoc}[1]{%
  \addtocontents{toc}{\vskip-10pt}%
  \addtocontents{toc}{%
    \protect\contentsline{chapter}%
    {\hskip1.5em\mdseries\scshape\protect\footnotesize#1}{}{}}
  \addtocontents{toc}{\vskip-5pt}%
}
\makeatother

% Command for chapter title photo                    % https://tex.stackexchange.com/a/91620/114006
\newcommand{\chapterphoto}[1]{\includegraphics[width=\textwidth, keepaspectratio]{#1}~\\[1cm]}

% Command for chapter title photo
